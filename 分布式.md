### 分布式事务

分布式事务用于在分布式系统中保证不同节点之间的数据一致性

#### **XA**分布式事务协议

XA协议包含**两阶段提交（2PC）**和**三阶段提交（3PC）**两种实现

角色：Tansaction Management【事务管理者】，	多个微服务

##### 二阶段

第一阶段，作为事务协调者的节点会首先向所有的参与者节点发送Prepare请求。

​	每一个参与者节点会各自执行与事务有关的数据更新，如果参与者执行成功，暂时不提交事务，而是向事务协调节点返回“完成”消息。当事务协调者接到了所有参与者的返回消息，整个分布式事务将会进入第二阶段。

第二阶段，如果事务协调节点在之前所收到都是正向返回，那么它将会向所有事务参与者发出Commit请求。

​	接到Commit请求之后，事务参与者节点会各自进行本地的事务提交，并释放锁资源。当本地事务完成提交后，将会向事务协调者返回“完成”消息。

##### **失败情况**：

在XA的第一阶段，如果某个事务参与者反馈失败消息，说明该节点的本地事务执行不成功，必须回滚。

于是在第二阶段，事务协调节点向所有的事务参与者发送Abort请n求。接收到Abort请求之后，各个事务参与者节点需要在本地进行事务的回滚操作，回滚操作依照Undo Log来进行。

刚性事务：保证实时一致性

柔性事务：保证最终一致性





面试题 

1. Eureka和Zookeeper区别
2. 什么是服务熔断？什么是服务降级?
3. 什么是Ribbon？
4. 什么是 Netflix Feign？它的优点是什么？
5. Ribbon和Feign的区别？
6. 什么是Spring Cloud Bus?
7. Spring Cloud Gateway?
8. 什么是SpringCloudConfig?
9. 什么是 Hystrix？它如何实现容错？
10. 什么是微服务？微服务优缺点
11. Sentinel，微服务哨兵，了解过吗